# DRS Configuration
# Generated by: drs init
# Documentation: https://github.com/manojlds/drs

# Optional: Custom OpenAI-compatible provider
# Uncomment and configure if you need a custom AI provider
# opencode:
#   provider:
#     custom-provider:
#       npm: "@ai-sdk/openai-compatible"
#       name: "Custom Provider"
#       options:
#         baseURL: "https://your-api.example.com/v1"
#         apiKey: "{env:CUSTOM_API_KEY}"
#       models:
#         model-name:
#           name: "Model Display Name"

review:
  # Default model and skills for all agents (required)
  # For built-in providers: anthropic/claude-sonnet-4-5-20250929, openai/gpt-4o, zhipuai/glm-4.7
  # For custom providers: provider-name/model-name
  default:
    model: opencode/glm-4.7-free
    skills:
      - cli-testing

  # Review mode
  # Options: multi-agent | unified | hybrid
  mode: unified

  # Review agents (used in multi-agent or hybrid modes)
  # Simple format (uses defaultModel):
  agents:
    - security
    - quality
    - style
    - performance
    - documentation

  # Unified review settings
  unified:
    severityThreshold: HIGH

  # OR detailed format with per-agent model overrides:
  # agents:
  #   - name: security
  #     model: anthropic/claude-opus-4-5-20251101  # Premium model for security
  #   - quality                                     # Uses defaultModel
  #   - name: style
  #     model: openai/gpt-4o                       # Different model for style
  #   - performance                                 # Uses defaultModel

  # Files to ignore during review
  ignorePatterns:
    - "*.test.ts"
    - "*.spec.ts"
    - "**/__tests__/**"
    - "**/__mocks__/**"
    - "package-lock.json"
    - "yarn.lock"
    - "pnpm-lock.yaml"

  # Auto-generate a description during review-mr/review-pr
  # CLI overrides:
  #   --describe / --skip-describe
  #   --post-description / --skip-post-description
  describe:
    enabled: true
    postDescription: true

# PR/MR Description Generator
describe:
  # Model to use for description generation (optional, defaults to review.defaultModel)
  # Used by describe-mr/describe-pr and by review-mr/review-pr when enabled.
  model: opencode/glm-4.7-free
  # Include .drs/context.md content in describe agent instructions
  includeProjectContext: true

# Context compression (diff size management)
contextCompression:
  enabled: true
  maxTokens: 32000
  softBufferTokens: 1500
  hardBufferTokens: 1000
  tokenEstimateDivisor: 4
